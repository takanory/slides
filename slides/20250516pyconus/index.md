```{eval-rst}
:og:image: _images/20250516pyconus.png
:og:image:alt: How to learn Japanese with Python

.. |cover| image:: images/20250516pyconus.png
```

# How to learn **Japanese** w/ **Python**

Takanori Suzuki

```{image} images/pyconus2025-logo.svg
:alt: PyCon US 2025 logo
:width: 50%
```

PyCon US 2025 / 2025 May 16

## Agenda ‚úÖ

* Background and Motivation / Goal
* Japanese is Difficult
* Python supports Japanese leaning

```{revealjs-notes}
* The agenda for this talk is as follows.
* I will talk about Background, Motivation and goal of this talk.
* Next, I will introduce some of the difficulties of the Japanese language.
* In the last part, I will explain how Python supports Japanese language learning, with example codes.
```

### PyCon US 2024

* **Lightning Talk** on the same idea
* I will talk in **more detail**

<iframe width="560" height="315" src="https://www.youtube.com/embed/p_Vx3gDHeUI?si=H6ZHmYQfvvWOn-U4&amp;controls=0&amp;start=530" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>

```{revealjs-notes}
I gave a lightning talk on the same idea at PyCon US 2024.
Does anyone remember it?
Today I will talk in more detail.
```

## Background and Motivation üèûÔ∏è

```{revealjs-notes}
* Background and Motivation of this talk...
```

### Background and Motivation

* Developing School **Textbook Web** at work
  * Japanese NLP to make it **Easier to Learn**
* NLP libs could help people **Learn Japanese**

```{revealjs-notes}
* Background and Motivation of this talk...
* My team is developing web-based Textbook for junior high school students at work.
* I am using Japanese NLP to make the textbook easier to learn.
* Based on this experience, I thought Python's NPL libraries could help people learn Japanese.
```

### Background and Motivation(cont.)

* [FSI language difficulty](https://www.fsi-language-courses.org/blog/fsi-language-difficulty/)
  * Japanese is "**super-hard languages**" for English speakers to learn
  * Catevory V* (More than 88 weeks)
  
```{revealjs-notes}
* "FSI language difficulty" reports Japanese is ...
```

```{revealjs-break}
:notitle:
```
  
<blockquote class="reddit-embed-bq" style="height:500px" data-embed-height="740"><a href="https://www.reddit.com/r/MapPorn/comments/1f97r63/language_difficulty_rankings_for_native_english/">Language difficulty rankings (for native English speakers)</a><br> by<a href="https://www.reddit.com/user/Homesanto/">u/Homesanto</a> in<a href="https://www.reddit.com/r/MapPorn/">MapPorn</a></blockquote><script async="" src="https://embed.reddit.com/widgets.js" charset="UTF-8"></script>
  

### Goal

* What is **difficult** about Japanese
* How to use **Japanese NLP** libs and APIs
* How Python can support **Japanese learning**

```{revealjs-notes}
* The goals of this talk are
* You know what is difficult about the Japanese language,
* You know how to use the Japanese NLP libraries and APIs and
* You understand how Python can support Japanese language 
```

## Photos üì∑ Share üê¶ üëç

`#PyConUS` / `@takanory`

```{revealjs-notes}
I would be happy to take pictures and share them on SNS.
Hashtag is #pyconus
```

### [`slides.takanory.net`](https://slides.takanory.net) üíª

```{image} images/slides-takanory-net.png
:alt: slides.takanory.net
:width: 85%
```

```{revealjs-notes}
This slide has been published.
Please visit slides.takanory.net or via QR code and click on the "Slides" link!
```

## Who am I? üë§

```{revealjs-break}
:notitle:
```

- Takanori Suzuki / Èà¥Êú® „Åü„Åã„ÅÆ„Çä ({fab}`twitter` [@takanory](https://twitter.com/takanory))
- [PyCon JP Association](https://www.pycon.jp/committee/english.html/): Chair
- [BeProud Inc.](https://www.beproud.jp/): Director / Python Climber
- [Python Boot Camp](https://www.pycon.jp/support/bootcamp.html), [Python mini Hack-a-thon](https://pyhack.connpass.com/), [Python Bouldering Club](https://kabepy.connpass.com/)
- Love: Ferrets, LEGO, üç∫ / Hobby: üé∫, üßó‚Äç‚ôÄÔ∏è

![takanory profile](/assets/images/sokidan-square.jpg)
![kuro-chan and kuri-chan](/assets/images/kurokuri.jpg)

```{revealjs-notes}
I'm Takanori Suzuki. My X(Twitter) is "takanory", please follow me.
I'm a Chair of PyCon JP Association.
And I'm a director of BeProud Inc and my title is "Python CLimber".
I'm also active in several Python related communities in Japan.
```

### PyCon JP Association

{fas}`globe` [`www.pycon.jp`](https://www.pycon.jp/committee/english.html)

**Nonprofit** organization for **Python users** in Japan, to **promote Python** and supports its development. Further it is **our goal** to hold an annual **PyCon JP**.

```{revealjs-notes}
PyCon JP Association is a nonprofit...
We hold PyCon JP every year.
Do you know PyCon JP?
```

![PyCon JP Association](/assets/images/pyconjp_logo.png)

### PyCon JP **2025**

* {fas}`globe` [`2025.pycon.jp`](https://2025.pycon.jp/)
* Date: 2025 **Sep 26**(Fri)-**27**(Sat)
* Place: **Hiroshima**, Japan
* There are **English talks**

```{image} images/pyconjp2025-in-hiroshima.jpg
:alt: PyCon JP 2025 in Hiroshima
:width: 60%
```

```{revealjs-notes}
PyCon JP 2025 will be held in Hiroshima at the end of September.
This is the first PyCon JP to be held outside of Tokyo.
Do you know Hiroshima?...
```

### Hiroshima? ‚õ©Ô∏è

* Fukuoka - **Hiroshima** - Kyoto - Tokyo - Hokkaido
* [Direct flights to Hiroshima - HIJ, Japan](https://www.directflights.com/to/HIJ)
  * Seoul, Taipei, Shanghai, Hong Kong, Dalian, Hanoi

```{image} https://maps.directflights.com/directflights/800/HIJ.jpg
:alt: Direct flights to Hiroshima
:width: 40%
```

```{revealjs-notes}
Do you know Hiroshima?...
Hiroshima is west of Tokyo and Kyoto.
Hiroshima has several direct flights from overseas, but sorry, no direct flights from US.
```

## Questions {nekochan}`hai`

### Have you **learned** Japanese? {nekochan}`study`

### Are you **interested** in Japanese? {nekochan}`miru`

### Would you like to **visit** Japan? {nekochan}`travel`

```{revealjs-notes}
Almost everyone.
There is a very good opportunity for you...
```

### PyCon JP **2025**

* 2025 **Sep 26**(Fri)-**27**(Sat)
* {nekochan}`yoshi;;;flip-horizontal` **Hiroshima**, Japan

```{image} images/pyconjp2025-in-hiroshima.jpg
:alt: PyCon JP 2025 in Hiroshima
:width: 80%
```

```{revealjs-notes}
PyCon JP 2025 will be held in Hiroshima in September.
See you again at PyCon JP 2025.
```

## Japanese is **Difficult** {nekochan}`yabai`

* **3 Types** of Characters
* **No Spaces** between Words
* **Multiple Readings** of Kanji

```{revealjs-notes}
Back to the main topic.
I will show you 3 difficult points of the Japanese language.
```

### **3 Types** of Characters

English | Peach(üçë) | Snake(üêç)
-- | -- | --
Pronounciation | momo | hebi
Hiragana | „ÇÇ„ÇÇ | „Å∏„Å≥
Katakana | „É¢„É¢ | „Éò„Éì
Kanji | Ê°É | Ëõá

```{revealjs-notes}
Japanese language has 3 types of characters: hiragana, katakana, and kanji.
This table shows 3 different characters for each peach and snake.
```

### **No Spaces** between Words

<ruby>„Åô„ÇÇ„ÇÇ„ÇÇ„ÇÇ„ÇÇ„ÇÇ„ÇÇ„ÇÇ„ÅÆ„ÅÜ„Å°<rt> su mo mo mo mo mo mo mo mo no u chi </rt></ruby>

```{revealjs-break}
```

„Åô„ÇÇ„ÇÇ„ÇÇ„ÇÇ„ÇÇ„ÇÇ„ÇÇ„ÇÇ„ÅÆ„ÅÜ„Å°

‚Üì

„Åô„ÇÇ„ÇÇ/„ÇÇ/„ÇÇ„ÇÇ/„ÇÇ/„ÇÇ„ÇÇ/„ÅÆ/„ÅÜ„Å°

"Plums and peaches are part of peaches"

```{revealjs-notes}
This sentence "„Åô„ÇÇ„ÇÇ„ÇÇ„ÇÇ„ÇÇ„ÇÇ„ÇÇ„ÇÇ„ÅÆ„ÅÜ„Å°" is a play on words, but it is correct Japanese.
Most Japanese can correctly break this sentence into words.
```

### **Multiple Readings** of Kanji

* **‰∫∫**: person, people

```{revealjs-notes}
For example, this kanji character means peason and people.
```

```{revealjs-break}
```

* 2 **styles of readings**
* **Japanese**-style reading(<ruby>Ë®ìË™≠„Åø<rt>kun yomi</rt></ruby>)
* **Chinese**-style reading(<ruby>Èü≥Ë™≠„Åø<rt>on yomi</rt></ruby>)

```{revealjs-notes}
Many kanji caracter have 2 styles of readings.
```
  
```{revealjs-break}
```

* **‰∫∫**: person, people
* **Japanese**-style reading: „Å≤„Å®(hito)„ÄÅ„Å≥„Å®(bito)
* **Chinese**-style reading: „Åò„Çì(jin)„ÄÅ„Å´„Çì(nin)

```{revealjs-notes}
The kanji caracter has a total of four different readings.
```

```{revealjs-break}
```

* Japanese-style reading: „Å≤„Å®(hito)„ÄÅ„Å≥„Å®(bito)
* Chinese-style reading: „Åò„Çì(jin)„ÄÅ„Å´„Çì(nin)
* Can you read?
  * Â∞è‰∫∫ (Small person)
  * Êó•Êú¨‰∫∫ (Japanese)

```{revealjs-notes}
What do you think these idioms read?
```

```{revealjs-break}
```

* <ruby>Â∞è<rt>ko</rt></ruby><ruby>‰∫∫<rt>**bito**</rt></ruby> (Samll person)
  * Japanese-style reading: „Å≤„Å®(hito)„ÄÅ„Å≥„Å®(bito)
* <ruby>Êó•<rt>ni</rt></ruby><ruby>Êú¨<rt>hon</rt></ruby><ruby>‰∫∫<rt>**jin**</rt></ruby> (Japanese)
  * Chinese-style reading: „Åò„Çì(jin)„ÄÅ„Å´„Çì(nin)
  
```{revealjs-notes}
The 1st one is Japanese-style reading, "Kobito".
The 2nd one is Chinese-style reading, "Nihonjin".
```
  

### Japanese is **Difficult**!! {nekochan}`scream`

* **3 Types** of Characters
* **No Spaces** between Words
* **Multiple Readings** of Kanji

```{revealjs-notes}
Japanese is Difficult!! But...
```

## {fab}`python` **Python** supports **Japanese** leaning

```{revealjs-notes}
We have Python!!
```

## **`<ruby>`** HTML Tag üíé

```{revealjs-notes}
I will explain the ruby tag before I talk about Python
```

### What is **Ruby** ?

* <ruby>„É´„Éì<rt>ruby</rt></ruby> characters are **small annotation** [^ruby]
* Usually placed **above** the text
* (Not a Programming Language)

[^ruby]: [Ruby character - Wikipedia](https://en.wikipedia.org/wiki/Ruby_character)

### **`<ruby>`** HTML Tag üíé

* `<ruby>` represents **small annotations** [^ruby-tag]
* `<rt>` specifies the **ruby text** component

<ruby>PyCon<rt>Python Conference</rt></ruby>
<ruby>US<rt>United States</rt></ruby>
2025

```html
<ruby>PyCon<rt>Python Conference</rt></ruby>
<ruby>US<rt>United States</rt></ruby>
2025
```

[^ruby-tag]: [`<ruby>`: The Ruby Annotation element](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/ruby)

```{revealjs-notes}
If I write a ruby tag like this, it will be displayed like this in a web browser
```

### Indicate **pronunciation** with `<ruby>`

* **Alphabet** annotation: Pronunciation

<ruby>„Éë„Ç§„Ç≥„É≥<rt>pa i ko n</rt></ruby>
<ruby>„ÅÇ„ÇÅ„Çä„Åã<rt>a me ri ka</rt></ruby>
(PyCon America)

```html
<ruby>„Éë„Ç§„Ç≥„É≥<rt>pa i ko n</rt></ruby>
<ruby>„ÅÇ„ÇÅ„Çä„Åã<rt>a me ri ka</rt></ruby>
```

```{revealjs-notes}
This slide uses the ruby tag to indicate pronunciation with alphabets.
```

```{revealjs-break}
```

* **Hiragana** annotation: Readings
* <ruby>„Åµ„Çä„Åå„Å™<rt>fu ri ga na</rt></ruby>

<ruby>„Ç¢„É°„É™„Ç´<rt>„ÅÇ„ÇÅ„Çä„Åã</rt></ruby>
<ruby>ÂêàË°ÜÂõΩ<rt>„Åå„Å£„Åó„ÇÖ„ÅÜ„Åì„Åè</rt></ruby>
(The United States of America)

```html
<ruby>„Ç¢„É°„É™„Ç´<rt>„ÅÇ„ÇÅ„Çä„Åã</rt></ruby>
<ruby>ÂêàË°ÜÂõΩ<rt>„Åå„Å£„Åó„ÇÖ„ÅÜ„Åì„Åè</rt></ruby>
```

```{revealjs-notes}
The ruby tag is also used for Furigana, the reading of other characters in hiragana.
```

### Figured out **`<ruby>`** Tag {nekochan}`naruhodo`

```{revealjs-notes}
Now we have figured out the the ruby tag, let's move on to Python.
```

## **Hiragana** and **Katakana** („ÅÇ / „Ç¢)

Snake(üêç) / hebi / „Å∏„Å≥ / „Éò„Éì

### **Hiragana** and **Katakana**

* Hiragana and Katakana are **phonogram**
* 1 character represent a phoneme(speech sound)
  * Like a Japanese **alphabet**
* Hiragana: <ruby>„ÅÇ„Åã„Åï„Åü„Å™<rt> a ka sa ta na</rt></ruby>...
* Katakana: <ruby>„Ç¢„Ç´„Çµ„Çø„Éä<rt> a ka sa ta na</rt></ruby>...

```{revealjs-break}
```

* Basically use Hiragana
  * <ruby>„ÅÇ„ÇÅ„Çä„Åã<rt> a me ri ka</rt></ruby> (America)
* Katakana is used for foreign words
  * <ruby><ruby>„Éë„Ç§„Ç≥„É≥<rt>pa i ko n </rt></ruby> (PyCon)

### **Romanization** of Japanese (Romaji)

* **Alphabet** to represent Japanese
* **Romaji** is often used on **Information Sign**

![Ikebukuro station](images/ikebukuro.jpg)

* Learn **Hiragana**/**Katakana** using Romaji

### jaconv

* [jaconv](https://github.com/ikegami-yukino/jaconv): interconverter for Hiragana, Katakana, alphabet and etc.

```bash
$ python3.12 -m venv env
$ . env/bin/activate
(env) pip install jaconv
```

```pycon
>>> import jaconv
>>> jaconv.kana2alphabet("„ÅÇ„ÇÅ„Çä„Åã")  # Hiragana -> alphabet
'amerika'
>>> jaconv.kata2alphabet("„Éë„Ç§„Ç≥„É≥")  # Katakana -> alphabet
'paikon'
```

### Add **Romaji** annotation

kana2roman.py

```{revealjs-literalinclude} code/kana2roman.py
:data-line-numbers: 2,4-7|9-12
```

```{revealjs-break}
```

```bash
(env) $ python kana2roman.py "„Éë„Ç§„Ç≥„É≥ „ÅÇ„ÇÅ„Çä„Åã"
<ruby>„Éë„Ç§„Ç≥„É≥ „ÅÇ„ÇÅ„Çä„Åã<rt>paikon amerika</rt></ruby>
```

<ruby>„Éë„Ç§„Ç≥„É≥ „ÅÇ„ÇÅ„Çä„Åã<rt>paikon amerika</rt></ruby>

### Can read **Hiragana** and **Katakana** {nekochan}`good`

## **No Spaces** between Words

<ruby>„Åô„ÇÇ„ÇÇ„ÇÇ„ÇÇ„ÇÇ„ÇÇ„ÇÇ„ÇÇ„ÅÆ„ÅÜ„Å°<rt> su mo mo mo mo mo mo mo mo no u chi </rt></ruby>

```{revealjs-break}
```

* Japanese has **no spaces** between words
* Use **Dictionary** to **Recognise** words
* Japanese **Morphological Analyzer** library required

### Japanese **Morphological Analyzer**

* see: {fab}`github` [taishi-i/awesome-japanese-nlp-resources](https://github.com/taishi-i/awesome-japanese-nlp-resources?tab=readme-ov-file#morphology-analysis)

```{image} images/japanese-nlp.png
:alt: Japanese Morphological Analyzers
:width: 60%
```

```{revealjs-notes}
There are many morphological analyzer libraries for Japanese.
```

### Japanese **Morphological Analyzer**

* SudachiPy: [pypi.org/project/SudachiPy](https://pypi.org/project/SudachiPy/)
* SudachiDcit: [pypi.org/project/SudachiDict-core](https://pypi.org/project/SudachiDict-core/)

```bash
(env) $ pip install sudachipy sudachidict_core
```

```{revealjs-notes}
In this case, I use SudachiPy and SudachiDict
```

### SudachiPy

* Made with **Rust**, Very **Fast**
* **Three Types** of Dictionaries
  * Small: small vocabulary
  * **Core**: basic vocabulary (**default**)
  * Full: miscellaneous proper nouns

```{revealjs-notes}
SudachiPy is made by Rust and is very fast.
SudachiDict has three types of different dictionaries with different numbers of vocabularies.
Here I use core dictionary, the default.
```

### **Word Segmentation**

* **Split** the words using **Dictionary**

```pycon
>>> from sudachipy import Dictionary
>>> tokenizer = Dictionary().create()
>>> text = "„Åô„ÇÇ„ÇÇ„ÇÇ„ÇÇ„ÇÇ„ÇÇ„ÇÇ„ÇÇ„ÅÆ„ÅÜ„Å°"
>>> for token in tokenizer.tokenize(text):
...     print(token)
... 
„Åô„ÇÇ„ÇÇ
„ÇÇ
„ÇÇ„ÇÇ
„ÇÇ
„ÇÇ„ÇÇ
„ÅÆ
„ÅÜ„Å°
```

### **Word Segmentation**

word_segmentation.py

```{revealjs-literalinclude} code/word_segmentation.py
:data-line-numbers: 2,4|6-11
```

```{revealjs-break}
```

```bash
(env) $ python word_segmentation.py „Åô„ÇÇ„ÇÇ„ÇÇ„ÇÇ„ÇÇ„ÇÇ„ÇÇ„ÇÇ„ÅÆ„ÅÜ„Å°
„Åô„ÇÇ„ÇÇ / „ÇÇ / „ÇÇ„ÇÇ / „ÇÇ / „ÇÇ„ÇÇ / „ÅÆ / „ÅÜ„Å°
```

„Åô„ÇÇ„ÇÇ / „ÇÇ / „ÇÇ„ÇÇ / „ÇÇ / „ÇÇ„ÇÇ / „ÅÆ / „ÅÜ„Å°

* **Cannot read** Hiragana?

### **Word Segmentation** with Romaji

word_segmentation_with_ruby.py

```{revealjs-literalinclude} code/word_segmentation_with_ruby.py
:data-line-numbers: 3,10
```

```{revealjs-break}
```

```bash
(env) $ python word_segmentation_with_ruby.py „Åô„ÇÇ„ÇÇ„ÇÇ„ÇÇ„ÇÇ„ÇÇ„ÇÇ„ÇÇ„ÅÆ„ÅÜ„Å°
<ruby>„Åô„ÇÇ„ÇÇ<rt>sumomo</rt></ruby> / <ruby>„ÇÇ<rt>mo</rt></ruby> / <ruby>„ÇÇ„ÇÇ<rt>momo</rt></ruby> / <ruby>„ÇÇ<rt>mo</rt></ruby> / <ruby>„ÇÇ„ÇÇ<rt>momo</rt></ruby> / <ruby>„ÅÆ<rt>no</rt></ruby> / <ruby>„ÅÜ„Å°<rt>uchi</rt></ruby>
```

<ruby>„Åô„ÇÇ„ÇÇ<rt>sumomo</rt></ruby> / <ruby>„ÇÇ<rt>mo</rt></ruby> / <ruby>„ÇÇ„ÇÇ<rt>momo</rt></ruby> / <ruby>„ÇÇ<rt>mo</rt></ruby> / <ruby>„ÇÇ„ÇÇ<rt>momo</rt></ruby> / <ruby>„ÅÆ<rt>no</rt></ruby> / <ruby>„ÅÜ„Å°<rt>uchi</rt></ruby>

### Can **split** into **Words** {nekochan}`clap`

```{revealjs-notes}
You can correctly split Japanese text into words!
```

## **Multiple Readings** of Kanji

<ruby>Â∞è<rt>ko</rt></ruby><ruby>‰∫∫<rt>bito</rt></ruby> (Small person)

<ruby>Êó•<rt>ni</rt></ruby><ruby>Êú¨<rt>hon</rt></ruby><ruby>‰∫∫<rt>jin</rt></ruby> (Japanese)

### **Multiple Readings** of Kanji

* **‰∫∫**: person, people
* üáØüáµ **Japanese**-style reading(<ruby>Ë®ìË™≠„Åø<rt>kun yomi</rt></ruby>):
  * <ruby>„Å≤„Å®<rt>hi to</rt></ruby>„ÄÅ<ruby>„Å≥„Å®<rt>bi to</rt></ruby>
* üá®üá≥ **Chinese**-style reading(<ruby>Èü≥Ë™≠„Åø<rt>on yomi</rt></ruby>):
  * <ruby>„Åò„Çì<rt>ji n</rt></ruby>„ÄÅ<ruby>„Å´„Çì<rt>ni n</rt></ruby>

```{revealjs-break}
```

* Â∞è**‰∫∫** (Small person): 
  üáØüáµ <ruby>„Åì<rt>ko</rt> <ruby>**„Å≥„Å®**<rt>bi to</rt>
* Êó•Êú¨**‰∫∫** (Japanese):
  üá®üá≥ <ruby>„Å´<rt>ni</rt> <ruby>„Åª„Çì<rt>ho n</rt> <ruby>**„Åò„Çì**<rt>jin</rt>
  
### {nekochan}`pokan`

```{revealjs-notes}
It's difficult, but not only this.
```

### Multiple Readings of **Kanji idioms**

* Same combination but **different readings**
* **‰∏Ä‰∫∫**: One person
  * **‰∏Ä‰∫∫** (One person)
  * **‰∏Ä‰∫∫**Ââç (One serving)

```{revealjs-break}
```

* Same combination but **different readings**
* **‰∏Ä‰∫∫**: One person
  * **‰∏Ä‰∫∫** (One person): <ruby>**„Å≤„Å®„Çä**<rt>hi to ri</rt></ruby> üáØüáµ
  * **‰∏Ä‰∫∫**Ââç (One serving): <ruby>**„ÅÑ„Å°„Å´„Çì**<rt>i chi ni n</rt></ruby> <ruby>„Åæ„Åà<rt>ma e</rt></ruby> üá®üá≥

### {nekochan}`yabai;1.5em` {nekochan}`yabai;1.5em`

```{revealjs-notes}
Terrible...
And there is more...
```

### **Special readings** of Kanji idioms

* ‰∏Ä **‰∫∫** (One person): <ruby>**„Å≤„Å®„Çä**<rt>hi to ri</rt></ruby> üáØüáµ
* ‰∫å **‰∫∫** (Two people)
* ‰∏â **‰∫∫** (Three people)

```{revealjs-break}
```

* ‰∏Ä **‰∫∫** (One person): <ruby>**„Å≤„Å®„Çä**<rt>hi to ri</rt></ruby> üáØüáµ
* ‰∫å **‰∫∫** (Two people): <ruby>**„Åµ„Åü„Çä**<rt>fu ta ri</rt></ruby> üáØüáµ
* ‰∏â **‰∫∫** (Three people): <ruby>**„Åï„Çì„Å´„Çì**<rt>sa n ni n</rt></ruby> üá®üá≥

```{revealjs-notes}
These are special readings of Kanji idioms.
```

```{revealjs-break}
```

* Other special readings
* Â§ß‰∫∫: <ruby>**„Åä„Å®„Å™**<rt>o to na</rt></ruby> (Adult)
* ÁéÑ‰∫∫: <ruby>**„Åè„Çç„ÅÜ„Å®**<rt>ku ro u to </rt></ruby> (Professional)
* Èò≤‰∫∫: <ruby>**„Åï„Åç„ÇÇ„Çä**<rt>sa ki mo ri</rt></ruby> (soldiers garrisoned at strategic posts in Kyushu in ancient times)

### {nekochan}`scream;2em` {nekochan}`scream;2em` {nekochan}`scream;2em`

```{revealjs-notes}
Oh my gosh
```

## Get **Reading** of Kanji

<ruby>‰∏Ä**‰∫∫**<rt>one person</rt>„ÅÆ<ruby>Êó•Êú¨**‰∫∫**<rt>Japanese</rt></ruby>„ÅÆ<ruby>Â§ß**‰∫∫**<rt>adult</rt></ruby>„Åå<ruby>‰∏Ä**‰∫∫**Ââç<rt>one serving</rt></ruby>„ÅÆ<ruby>„É©„Éº„É°„É≥<rt>üçú</rt></ruby>„Çí<ruby>È£ü„Åπ„Çã<rt>eat</rt></ruby>

One Japanese adult eats one serving of ramen

```{revealjs-notes}
There are 4 same kanji character, all with different readings.
```

### Get **Reading** of Kanji

* Use **SudachiPy** and **SudachiDict** again
* `reading_form()`: Reading in Katakana

```pycon
>>> from sudachipy import Dictionary
>>> tokenizer = Dictionary().create()  # Make tokenizer
>>> text = "‰∏Ä‰∫∫„ÅÆÊó•Êú¨‰∫∫„ÅÆÂ§ß‰∫∫„Åå‰∏Ä‰∫∫Ââç„ÅÆ„É©„Éº„É°„É≥„ÇíÈ£ü„Åπ„Çã"
>>> for token in tokenizer.tokenize(text):  # Word segmentation
...     (str(token), token.reading_form())  # Get reading
... 
('‰∏Ä‰∫∫', '„Éí„Éà„É™')
('„ÅÆ', '„Éé')
('Êó•Êú¨‰∫∫', '„Éã„Éõ„É≥„Ç∏„É≥')
('„ÅÆ', '„Éé')
('Â§ß‰∫∫', '„Ç™„Éà„Éä')
...
```

```{revealjs-break}
```

* Looks good {nekochan}`good`
* Cannot read **Katakana**?

```pycon
('‰∏Ä‰∫∫', '„Éí„Éà„É™')
('„ÅÆ', '„Éé')
('Êó•Êú¨‰∫∫', '„Éã„Éõ„É≥„Ç∏„É≥')
('„ÅÆ', '„Éé')
('Â§ß‰∫∫', '„Ç™„Éà„Éä')
...
```

```{revealjs-break}
```

* Cannot read **Katakana**? Use **jaconv**!

```
>>> from jaconv import kata2hira, kata2alphabet
>>> for token in tokenizer.tokenize(text):
...     reading = token.reading_form()
...     hiragana = kata2hira(reading)  # to Hiragana
...     romaji = kata2alphabet(reading)  # to Alphabet(romaji)
...     (str(token), reading, hiragana, romaji)
... 
('‰∏Ä‰∫∫', '„Éí„Éà„É™', '„Å≤„Å®„Çä', 'hitori')
('„ÅÆ', '„Éé', '„ÅÆ', 'no')
('Êó•Êú¨‰∫∫', '„Éã„Éõ„É≥„Ç∏„É≥', '„Å´„Åª„Çì„Åò„Çì', 'nihonjin')
('„ÅÆ', '„Éé', '„ÅÆ', 'no')
('Â§ß‰∫∫', '„Ç™„Éà„Éä', '„Åä„Å®„Å™', 'otona')
...
```

### Can get **Reading** to **Kanji** {nekochan}`yatta`

### **Add Reading** to Kanji

kanji_reading.py

```{revealjs-literalinclude} code/kanji_reading.py
:data-line-numbers: 3,5|7-13
```

```{revealjs-break}
```

<ruby>‰∏Ä‰∫∫<rt>„Å≤„Å®„Çä</rt></ruby>
<ruby>„ÅÆ<rt>„ÅÆ</rt></ruby>
<ruby>Êó•Êú¨‰∫∫<rt>„Å´„Åª„Çì„Åò„Çì</rt></ruby>
<ruby>„ÅÆ<rt>„ÅÆ</rt></ruby>
<ruby>Â§ß‰∫∫<rt>„Åä„Å®„Å™</rt></ruby>
<ruby>„Åå<rt>„Åå</rt></ruby>
<ruby>‰∏Ä‰∫∫Ââç<rt>„ÅÑ„Å°„Å´„Çì„Åæ„Åà</rt></ruby>
<ruby>„ÅÆ<rt>„ÅÆ</rt></ruby>
<ruby>„É©„Éº„É°„É≥<rt>„Çâ„Éº„ÇÅ„Çì</rt></ruby>
<ruby>„Çí<rt>„Çí</rt></ruby>
<ruby>È£ü„Åπ„Çã<rt>„Åü„Åπ„Çã</rt></ruby>

```bash
(env) $ python kanji_reading.py ‰∏Ä‰∫∫„ÅÆÊó•Êú¨‰∫∫„ÅÆÂ§ß‰∫∫„Åå‰∏Ä‰∫∫Ââç„ÅÆ„É©„Éº„É°„É≥„ÇíÈ£ü„Åπ„Çã
<ruby>‰∏Ä‰∫∫<rt>„Å≤„Å®„Çä</rt></ruby>
<ruby>„ÅÆ<rt>„ÅÆ</rt></ruby>
<ruby>Êó•Êú¨‰∫∫<rt>„Å´„Åª„Çì„Åò„Çì</rt></ruby>
<ruby>„ÅÆ<rt>„ÅÆ</rt></ruby>
<ruby>Â§ß‰∫∫<rt>„Åä„Å®„Å™</rt></ruby>
...
```

```{revealjs-break}
```

kanji_reading_romaji.py

```{revealjs-literalinclude} code/kanji_reading_romaji.py
:data-line-numbers: 11,12
```

```{revealjs-break}
```

<ruby>‰∏Ä‰∫∫<rt>hitori</rt></ruby>
<ruby>„ÅÆ<rt>no</rt></ruby>
<ruby>Êó•Êú¨‰∫∫<rt>nihonjin</rt></ruby>
<ruby>„ÅÆ<rt>no</rt></ruby>
<ruby>Â§ß‰∫∫<rt>otona</rt></ruby>
<ruby>„Åå<rt>ga</rt></ruby>
<ruby>‰∏Ä‰∫∫Ââç<rt>ichininmae</rt></ruby>
<ruby>„ÅÆ<rt>no</rt></ruby>
<ruby>„É©„Éº„É°„É≥<rt>ra„Éºmen</rt></ruby>
<ruby>„Çí<rt>wo</rt></ruby>
<ruby>È£ü„Åπ„Çã<rt>taberu</rt></ruby>

```bash
(env) $ python kanji_reading_romaji.py ‰∏Ä‰∫∫„ÅÆÊó•Êú¨‰∫∫„ÅÆÂ§ß‰∫∫„Åå‰∏Ä‰∫∫Ââç„ÅÆ„É©„Éº„É°„É≥„ÇíÈ£ü„Åπ„Çã
<ruby>‰∏Ä‰∫∫<rt>hitori</rt></ruby>
<ruby>„ÅÆ<rt>no</rt></ruby>
<ruby>Êó•Êú¨‰∫∫<rt>nihonjin</rt></ruby>
<ruby>„ÅÆ<rt>no</rt></ruby>
<ruby>Â§ß‰∫∫<rt>otona</rt></ruby>
```

### Can read **Kanji** {nekochan}`medetai`
 
## Kanji **level** support {nekochan}`tunda`

### Kanji **level** support {nekochan}`tunda`

 * If you study Japanese, you may know the **JLPT** [^jlpt]
* JLPT has **N1**(difficult) ~ **N5**(easy) levels [^jlpt-level]

```{image} https://www.jlpt.jp/e/resource/img_common/logo.gif
:alt: JLPT logo
:target: https://www.jlpt.jp/e/index.html
```

[^jlpt]: [What is the Japanese-Language Proficiency Test? Index | JLPT Japanese-Language Proficiency Test](https://www.jlpt.jp/e/about/index.html)
[^jlpt-level]: [N1-N5: Summary of Linguistic Competence Required for Each Level | JLPT Japanese-Language Proficiency Test](https://www.jlpt.jp/e/about/levelsummary.html)

### Readings corresponding to **Kanji levels** {nekochan}`kamon`

```{revealjs-notes}
I want to create readings corresponding to kanji levels.
```

### **Kanji list** for each level

* [jiten](https://pypi.org/project/jiten/) has JLPT Kanji lists
  * <https://github.com/obfusk/jiten/tree/master/jiten/res/jlpt>

### Make JLPT **Kanji level dict**

make_jlpt_kanji_dict.py

```{revealjs-literalinclude} code/make_jlpt_kanji_dict.py
:language: python
:data-line-numbers: 2-10|1,12-13
```

```{revealjs-break}
```

* Kanji dict is ready!! {nekochan}`naosu`

```bash
% python make_jlpt_kanji_dict.py
```

```{revealjs-literalinclude} code/JLPT_kanji.json
```

### Get reading with **Kanji level**

* `-a`: Alphabet annotation(default: Hiragana)
* `-l`: Kanji level option

```text
% python kanji_reading_with_level.py -h
usage: kanji_reading_with_level.py [-h] [-a] [-l {1,2,3,4,5}] text

Add Furigana to Japanese text

positional arguments:
  text            text to add furigana annotation

options:
  -h, --help      show this help message and exit
  -a              Alphabet(Romaji) annotation(default: Hiragana)
  -l {1,2,3,4,5}  set kanji level
```

```{revealjs-notes}
I have created an annotation script that supports Kanji levels.
```

```{revealjs-break}
```

```bash
% python kanji_reading_with_level.py Êó•Êú¨Ë™û„ÇíÂãâÂº∑„Åô„Çã
```

<ruby>Êó•Êú¨Ë™û<rt>„Å´„Åª„Çì„Åî</rt></ruby>
<ruby>„Çí<rt>„Çí</rt></ruby>
<ruby>ÂãâÂº∑<rt>„Åπ„Çì„Åç„Çá„ÅÜ</rt></ruby>
<ruby>„Åô„Çã<rt>„Åô„Çã</rt></ruby>
(default)

```bash
% python kanji_reading_with_level.py -a Êó•Êú¨Ë™û„ÇíÂãâÂº∑„Åô„Çã
```

<ruby>Êó•Êú¨Ë™û<rt>nihongo</rt></ruby>
<ruby>„Çí<rt>wo</rt></ruby>
<ruby>ÂãâÂº∑<rt>benkyou</rt></ruby>
<ruby>„Åô„Çã<rt>suru</rt></ruby>
(Alphabet(romaji))

```bash
% python kanji_reading_with_level.py -l 5 Êó•Êú¨Ë™û„ÇíÂãâÂº∑„Åô„Çã
```

Êó•Êú¨Ë™û
„Çí
<ruby>ÂãâÂº∑<rt>„Åπ„Çì„Åç„Çá„ÅÜ</rt></ruby>
„Åô„Çã
(N5 level)

```{revealjs-notes}
I will explain the code.
```

### Parse arguments

* Process `-a` and `-l` with **argparse**
* Call `add_reading()` function

```{revealjs-literalinclude} code/kanji_reading_with_level.py
:data-line-numbers: 70-79|80
```

### Get **Kanji set** with level

* Get Kanji set with `get_kanji_set(level)`

```{revealjs-literalinclude} code/kanji_reading_with_level.py
:data-line-numbers: 53-55
```

```{revealjs-notes}
In add_reading() func, to get the Kanji set, specify the level argument to the get_kanji_set() func.
```

```{revealjs-break}
```

* Load `"JLPT_kanji.json"`
* Create a Kanji set is **easier than level**

```{revealjs-literalinclude} code/kanji_reading_with_level.py
:data-line-numbers: 26-32|33-37
```

```{revealjs-notes}
get_kanji_set() func reads Kanjis per level from JSON.
Then Create a Kanji set that is easier than the level.
```

### Is **ruby required**?

* **Ruby / not Ruby** with `is_ruby_required()`

```{revealjs-literalinclude} code/kanji_reading_with_level.py
:data-line-numbers: 53,57-59
```

```{revealjs-notes}
Determine if ruby is required or not with the is_ruby_required() function for each token.
```

```{revealjs-break}
```

* Get all Kanjis -> `kanji_in_surface`
* Kanjis are **within** the level or **above**

```{revealjs-literalinclude} code/kanji_reading_with_level.py
:data-line-numbers: 40-45|46-50
```

```{revealjs-notes}
In the function, I get all Kanjis in the token and assign them to kanji_in_surface.
Next, determine if there is a Kanji and if Kanjis are within the level or above the level.
```

### Add **Ruby text**

* `is_ruby_required() == True`: add Ruby
* `alphabet`: Alphabet or Hiragana(default)

```{revealjs-literalinclude} code/kanji_reading_with_level.py
:data-line-numbers: 57-67|60-63
```

```{revealjs-notes}
Finally, if is_ruby_required() is True, add ruby text.
And, depending on the value of alphabet, ruby is converted to alphabet or hiragana
```

### Can handle **Kanji level**!! {nekochan}`yatta`

No Level: <ruby>Êó•Êú¨Ë™û<rt>„Å´„Åª„Çì„Åî</rt></ruby>
<ruby>„Çí<rt>„Çí</rt></ruby>
<ruby>ÂãâÂº∑<rt>„Åπ„Çì„Åç„Çá„ÅÜ</rt></ruby>
<ruby>„Åô„Çã<rt>„Åô„Çã</rt></ruby>

N5: Êó•Êú¨Ë™û
„Çí
<ruby>ÂãâÂº∑<rt>„Åπ„Çì„Åç„Çá„ÅÜ</rt></ruby>
„Åô„Çã

N4: Êó•Êú¨Ë™û
„Çí
ÂãâÂº∑
„Åô„Çã

```{revealjs-notes}
Now, We can handle Kanji level.
You can learn Kanji at your own Japanese level.
```

## **Sample** App {nekochan}`work`

* {fab}`github` [learn_jp_pyconus.py](https://github.com/takanory/learn-jp-with-python/blob/main/learn_jp_pyconus.py)

```bash
% git clone https://github.com/takanory/learn-jp-with-python.git
% cd learn-jp-with-python/
% python3.12 -m venv env
% . env/bin/activate
(env) % pip install -r requirements.txt
(env) % streamlit run learn_jp_pyconus.py
```

```{revealjs-break}
:notitle:
```

```{image} images/streamlit_demo.gif
:width: 85%
```

## **Summary** {nekochan}`juutai`

* Japanese is **Difficult**
  * 3 Characters, No spaces, Kanji readings
* Python supports Japanese learning
  * **jaconv**: Interconverter
  * **SudachiPy**: Morphological analyzer
* **Kanji level** support
  
## üáØüáµ ‚ù§Ô∏è {fab}`python`

Learn **Japanese** with **Python**

```{revealjs-notes}
You can learn Japanese with Python.
Please try to create your own Japanese learning tool!
```

## Thank you {nekochan}`pray`

{fas}`desktop` [slides.takanory.net](https://slides.takanory.net/)
{fas}`code` [sample code](https://github.com/takanory/slides/tree/master/slides/20250516pyconus/code)

{fab}`twitter` [takanory](https://twitter.com/takanory)
{fab}`github` [takanory](https://github.com/takanory/)
{fab}`linkedin` [takanory](https://www.linkedin.com/in/takanory/)
{fab}`untappd` [takanory](https://untappd.com/user/takanory/)

![takanory profile](/assets/images/sokidan-square.jpg)
![kuro-chan and kuri-chan](/assets/images/kurokuri.jpg)
